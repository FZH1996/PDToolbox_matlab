\section{Implementation}

\subsection{Parameters of the Implementation}


\begin{table}[tbh]
\begin{center}
\begin{tabular}{l | p{.5 \textwidth} | l}\hline
Field & Description & Default value\\ \hline
P & Number of populations & 1 \\
n & Number of pure strategies per population & - \\
S & Vector of pure strategies in each population & ones(G.P, 1) * G.n \\
m & Vector with the mass of each population & ones(G.P, 1) \\
x0 & Initial state of the society & random \\
f & Function that returns a vector with the fitness of each strategy of a population & - \\
ode & ODE solver for the evolutionary dynamics & 'ode45' \\
dynamics & Evolutionary dynamic. Current version support combinations of {'rd', 'maynard\_rd',  'bnn', 'smith',  'logit'} & 'rd' \\
gamma & Defines the weight given to each dynamic when using combined dynamics &  $\sum \gamma(i) = 1$ \\ \hline
\end{tabular}
\end{center}
\caption{Parameters of the dynamical implementation.}
\label{tab:req_a}
\end{table}




\begin{table}[tbh]
\begin{center}
\begin{tabular}{l| p{.5 \textwidth} |l}\hline
Field & Description & Default value \\ \hline
N & Number of agents & 100 \\
R & Rate of the Poisson clock & 1 \\
revision\_protocol & Revision protocol. The current version support one of the following: comparison2average, pairwise\_comparison, logit\_choice, proportional\_imitation. & 'proportional\_imitation' \\ \hline
\end{tabular}
\end{center}
\caption{Parameters of the revision protocol.}
\label{tab:req_b}
\end{table}




The toolbox uses a structure that contains all the parameters required to run the simulations. The parameters of a population game are defined in Table \ref{tab:req_a}. The following is an example to define a game with one population and three strategies per population:
%
\begin{lstlisting}
G = struct('n', 3, 'f', @fitness1, 'dynamics', {rd} ,  'ode', 'ode113', 'x0',  [0.2 .7 0.1 ]', 'time', 60);
\end{lstlisting}
%
$n$ defines the number of strategies per population, $f$ is a function handler that calculates the fitness of the strategies in each population, and $dynamics$ defines the name of the evolutionary dynamics that we want to use. The simulations are run using the ordinal differential equation (ODE) solver called $ode113$, with initial condition $x0 = [0.2, \, 0.7, \, 0.1 ]^\top$ during $60$ time units.
Note that the number of populations and the mass of each population are defined by default to one.  The simulation can be started by executing
%
\begin{lstlisting}
 G.run()
\end{lstlisting}




On the other hand, the following structure is used to define a population game with small number of agents per population:
%
\begin{lstlisting}
G = struct('N', 200, 'n', 3, 'f', @fitness1, 'x0',  [0.2 .7 0.1 ]', 'ode', 'ode113', 'time', 10000, 'eta', 0.02, 'revision_protocol', @proportional_imitation); 
\end{lstlisting}
%
The finite population case uses the same parameters than the dynamical implementation, except for the dynamical model. However, it is necessary to define the revision protocol  and the number of agents $N$ per population.
Table \ref{tab:req_b} contains the list of parameters required to run the revision protocol. The simulation of the revision protocol can be started by executing
\begin{lstlisting}
 G.run_finite()
\end{lstlisting}

The functions \verb|G.graph()| and \verb|G.graph_evolution()| are used to graph the simplex and the state evolution of the society for both cases.




\input{algorithms}
